<!DOCTYPE html>
<html>
  <head> 
    <meta charset="utf-8">
    <title>Creature World Demos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel=icon href="./assets/img/favicon.png">
 
    <!-- CSS -->
    <link rel="stylesheet" href="./css/main.css">

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // Function to fetch the wallet address from the external server
        const fetchWalletAddressFromExternalServer = async () => {
          try {
            const response = await fetch('http://localhost:3001/api/wallet'); // Replace with the external server's URL
            const data = await response.json();
            if (data.walletAddress) {
              console.log('Wallet address received from external server:', data.walletAddress);
              return data.walletAddress;
            } else {
              console.error('No wallet address found on external server');
              return null;
            }
          } catch (error) {
            console.error('Error fetching wallet address from external server:', error);
            return null;
          }
        };
  
        // Function to fetch wallet data using the wallet address
        const fetchWalletAddressData = async (walletAddress) => {
          try {
            const response = await fetch(`https://creature-cubes-api.vercel.app/api/0x123`);
            const data = await response.json();
            

            // Check if data is valid
            if (data.walletAddress) {
              console.log(`Data for wallet ${data.walletAddress}:`, data);
              // You can now render the data in your UI, use it in Three.js, etc.
            } else {
              console.log('No data found for this wallet address.' , walletAddress);
            }
          } catch (error) {
            console.error('Error fetching wallet data from server:', error);
          }
        };
  
        // First, fetch the wallet address from the external server
        const getAndFetchWalletData = async () => {
          const walletAddress = await fetchWalletAddressFromExternalServer();
          if (walletAddress) {
            // Once the wallet address is received, fetch the corresponding data
            fetchWalletAddressData(walletAddress);
          }
        };
  
        // Call the function to get the wallet address and fetch data
        getAndFetchWalletData();
      });
    </script>

  </head>
  <body> 

    

    <!-- CREATURE UI -->
    <div id="creature-ui">

      <!--  -->
      <div id="model-viewer_container">

        <!-- THREE -->
        <div id="threeD-container"></div>

        <!-- POPOUT -->
        <div id="inventory_container">

          <!-- THUMB -->
          <button id="inventory-holder_thumb">
            <svg id="inventory-holder_thumb_svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 53.98 52.25">
              <g>
                <g>
                  <path d="M9.14,0h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H9.13c-5.04,0-9.13-4.09-9.13-9.13V9.14C0,4.09,4.09,0,9.14,0Z"/>
                  <path d="M9.39.26h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H9.39c-5.04,0-9.13-4.09-9.13-9.13V9.39C.26,4.35,4.35.26,9.39.26Z"/>
                  <path d="M9.65.51h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H9.64c-5.04,0-9.13-4.09-9.13-9.13V9.65C.51,4.6,4.6.51,9.65.51Z"/>
                  <path d="M9.9.77h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H9.9c-5.04,0-9.13-4.09-9.13-9.13V9.9C.77,4.86,4.86.77,9.9.77Z"/>
                  <path d="M10.16,1.02h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H10.15c-5.04,0-9.13-4.09-9.13-9.13V10.16C1.02,5.11,5.11,1.02,10.16,1.02Z"/>
                  <path d="M10.41,1.28h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H10.41c-5.04,0-9.13-4.09-9.13-9.13V10.41C1.28,5.37,5.37,1.28,10.41,1.28Z"/>
                  <path d="M10.67,1.53h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H10.66c-5.04,0-9.13-4.09-9.13-9.13V10.67C1.53,5.62,5.62,1.53,10.67,1.53Z"/>
                  <path d="M10.92,1.79h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H10.92c-5.04,0-9.13-4.09-9.13-9.13V10.92C1.79,5.88,5.88,1.79,10.92,1.79Z"/>
                  <path d="M11.18,2.04h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H11.17c-5.04,0-9.13-4.09-9.13-9.13V11.18C2.04,6.13,6.13,2.04,11.18,2.04Z"/>
                  <path d="M11.43,2.3h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H11.43c-5.04,0-9.13-4.09-9.13-9.13V11.43C2.3,6.39,6.39,2.3,11.43,2.3Z"/>
                  <path d="M11.69,2.55h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H11.68c-5.04,0-9.13-4.09-9.13-9.13V11.69C2.55,6.64,6.64,2.55,11.69,2.55Z"/>
                  <path d="M11.94,2.81h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H11.94c-5.04,0-9.13-4.09-9.13-9.13V11.94C2.81,6.9,6.9,2.81,11.94,2.81Z"/>
                  <path d="M12.2,3.06h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H12.19c-5.04,0-9.13-4.09-9.13-9.13V12.2C3.06,7.15,7.15,3.06,12.2,3.06Z"/>
                  <path d="M12.45,3.32h30.36c5.04,0,9.14,4.09,9.14,9.14v28.62c0,5.04-4.09,9.13-9.13,9.13H12.45c-5.04,0-9.13-4.09-9.13-9.13V12.45C3.32,7.41,7.41,3.32,12.45,3.32Z"/>
                  <path d="M12.71,3.57h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H12.7c-5.04,0-9.13-4.09-9.13-9.13V12.71C3.57,7.66,7.66,3.57,12.71,3.57Z"/>
                  <path d="M12.96,3.83h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H12.96c-5.04,0-9.13-4.09-9.13-9.13V12.96C3.83,7.92,7.92,3.83,12.96,3.83Z"/>
                  <path d="M13.22,4.08h30.36c5.04,0,9.14,4.09,9.14,9.14v28.62c0,5.04-4.09,9.13-9.13,9.13H13.22c-5.04,0-9.13-4.09-9.13-9.13V13.22c0-5.04,4.09-9.14,9.14-9.14Z"/>
                  <path d="M13.47,4.34h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H13.47c-5.04,0-9.13-4.09-9.13-9.13V13.47c0-5.04,4.09-9.14,9.14-9.14Z"/>
                  <path d="M13.73,4.59h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H13.73c-5.04,0-9.13-4.09-9.13-9.13V13.73c0-5.04,4.09-9.14,9.14-9.14Z"/>
                  <path d="M13.98,4.85h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H13.98c-5.04,0-9.13-4.09-9.13-9.13V13.98c0-5.04,4.09-9.14,9.14-9.14Z"/>
                  <path d="M14.24,5.1h30.36c5.04,0,9.14,4.09,9.14,9.14v28.62c0,5.04-4.09,9.13-9.13,9.13H14.24c-5.04,0-9.13-4.09-9.13-9.13V14.24c0-5.04,4.09-9.14,9.14-9.14Z"/>
                  <path d="M14.49,5.36h30.36c5.04,0,9.13,4.09,9.13,9.13v28.62c0,5.04-4.09,9.13-9.13,9.13H14.49c-5.04,0-9.13-4.09-9.13-9.13V14.49c0-5.04,4.09-9.14,9.14-9.14Z"/>
                </g>
                <rect class="inr" x="2" y="2" width="44.63" height="42.89" rx="7.14" ry="7.14" />
              </g>
              <path d="M24.44,13.05c-.09-.04-.19-.04-.29,0l-9.6,3.64,9.74,3.83,9.74-3.83-9.6-3.64ZM13.77,29.62c0,.17.11.32.26.38l9.05,3.43v-10.78l-9.32-3.66v10.62h0ZM25.52,33.43l9.05-3.43c.16-.06.26-.21.26-.38v-10.62l-9.32,3.66v10.78h0ZM23.3,10.78c.65-.25,1.36-.25,2.01,0l10.13,3.84c1.1.42,1.83,1.47,1.83,2.65v12.35c0,1.18-.73,2.23-1.83,2.65l-10.13,3.84c-.65.25-1.36.25-2.01,0l-10.13-3.84c-1.1-.42-1.83-1.47-1.83-2.65v-12.35c0-1.18.73-2.23,1.83-2.65l10.13-3.84h0Z" style="fill: #fff;"/>
            </svg>
          </button>

          <!-- CUBE HOLDER -->
          <div id="inventory-holder">
            <button id="inventory-holder_exit-btn"></button>
            <div id="inventory-holder_content"></div>
          </div>
          
        </div>

        

      </div>
      
    </div>

	
	<!-- Main -->	
    <script src="./assets/js/GSAP/gsap.min.js"></script>
    <script type="importmap">
        {
            "imports": {
                "three": "./assets/js/three/build/three.module.js",
                "three/addons/": "./assets/js/three/jsm/",
                "scripts/": "./js/"
            }
        }
    </script>
    <script type="module" src="./js/main.js"></script>

  </body>  
</html>
